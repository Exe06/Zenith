<!DOCTYPE html>
<html lang="es">

<%- include('partials/head') %>

<body>
  
  <%- include('partials/header2') %>

  <div class="container">
    

    <h1>Nueva publicación</h1>
    <div class="sub">Ingresá la información de tu propiedad. Podés guardar como borrador y publicar más tarde.</div>

    <form id="listingForm" class="grid" novalidate>
      <!-- LEFT -->
      <div>
        <!-- Básico -->
        <section class="card section">
          <h3>Información básica</h3>
          <div class="row">
            <div class="field h6">
              <label class="label" for="title">Título <span class="hint" id="titleCount">0/80</span></label>
              <input id="title" name="title" maxlength="80" placeholder="Ej: Departamento céntrico, luminoso y con balcón" required />
            </div>
            <div class="field h6">
              <label class="label" for="operationType">Tipo de operación</label>
              <select id="operationType" name="operation_type" required>
                <option value="">Seleccionar</option>
                <option value="alquiler">Alquiler a largo plazo</option>
                <option value="temporal">Alquiler temporal</option>
              </select>
            </div>
            <div class="field h6">
              <label class="label" for="propertyType">Tipo de inmueble</label>
              <select id="propertyType" name="property_type" required>
                <option value="">Seleccionar</option>
                <option value="departamento">Departamento</option>
                <option value="casa">Casa</option>
                <option value="monoambiente">Monoambiente</option>
              </select>
            </div>
            <div class="field h6">
              <label class="label" for="address">Dirección</label>
              <input id="address" name="address" placeholder="Calle, número" required />
            </div>
            <div class="field h4">
              <label class="label" for="province">Provincia</label>
              <select id="province" required></select>
            </div>
            <div class="field h4">
              <label class="label" for="city">Ciudad / Localidad</label>
              <input id="city" name="city" placeholder="Santiago del Estero" required />
            </div>
            <div class="field h4">
              <label class="label" for="neighborhood">Barrio (opcional)</label>
              <input id="neighborhood" name="neighborhood" placeholder="Centro" />
            </div>
            <div class="field">
              <label class="label" for="description">Descripción <span class="hint" id="descCount">0/500</span></label>
              <textarea id="description" name="description" maxlength="500" placeholder="Contá lo mejor de tu propiedad: orientación, terminaciones, cercanías, etc." required></textarea>
            </div>
          </div>
        </section>

        <!-- Detalles físicos -->
        <section class="card section">
          <h3>Detalles</h3>
          <div class="row">
            <div class="field h3"><label class="label" for="rooms">Ambientes</label><input id="rooms" type="number" min="1" step="1" required></div>
            <div class="field h3"><label class="label" for="bedrooms">Dormitorios</label><input id="bedrooms" type="number" min="0" step="1" required></div>
            <div class="field h3"><label class="label" for="bathrooms">Baños</label><input id="bathrooms" type="number" min="1" step="1" required></div>
            <div class="field h3"><label class="label" for="area">Superficie (m²)</label><input id="area" type="number" min="10" step="1" required></div>
            <div class="field h3"><label class="label" for="covered-area">Superficie Cubierta (m²)</label><input id="covered-area" type="number" min="10" step="1" required></div>
            <div class="field h3"><label class="label" for="floors">Pisos</label><input id="floors" type="number" min="1" step="1" required></div>
          </div>
        </section>

        <!-- Servicios -->
        <section class="card section">
          <h3>Servicios</h3>
          <div class="chips" id="amenities">
            <span class="chip" data-key="electricidad">Electricidad</span>
            <span class="chip" data-key="agua">Agua Corriente</span>
            <span class="chip" data-key="gas">Gas Natural</span>
            <span class="chip" data-key="ac">Aire Acondicionado</span>
            <span class="chip" data-key="calefaccion">Calefacción</span>
            <span class="chip" data-key="seguridad">Seguridad 24h</span>
            <span class="chip" data-key="lavadero">Lavadero</span>
            <span class="chip" data-key="piscina">Piscina</span>
            <span class="chip" data-key="ascensor">Ascensor</span>
            <span class="chip" data-key="cochera">Cochera</span>
            <span class="chip" data-key="balcon">Balcon</span>
            <span class="chip" data-key="patio">Patio</span>
            <span class="chip" data-key="mascotas">Mascotas</span>
          </div>
        </section>

        <!-- Imágenes -->
        <section class="card section">
          <h3>Imágenes</h3>
          <div class="uploader" id="drop">
            <input type="file" id="files" accept="image/*" multiple>
            <div>
              <div class="cta" onclick="document.getElementById('files').click()">Subir imágenes</div>
              <div class="hint" style="margin-top:8px">Arrastrá y soltá hasta 10 imágenes. La primera será la principal.</div>
            </div>
          </div>
          <div id="previews" class="previews" aria-live="polite"></div>
        </section>

        <!-- Ubicación -->
        <section class="card section">
          <h3>Ubicación</h3>
          <div class="row">
            <div class="field"><label class="label" for="maps">URL de Google Maps (opcional)</label><input id="maps" placeholder="https://maps.google.com/..." type="url"></div>
          </div>
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d14118.646114725634!2d-64.2755133029628!3d-27.789401490816584!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x943b52103439bf83%3A0xdb1fbfa8b97fbad6!2sUrquiza%20200%2C%20G4204%20Santiago%20del%20Estero!5e0!3m2!1ses-419!2sar!4v1754765928238!5m2!1ses-419!2sar" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </section>

        <!-- Condiciones -->
        <section class="card section">
          <h3>Condiciones y precio</h3>
          <div class="row">
            <div class="field h6"><label class="label" for="baseAmount">Monto base</label><input id="baseAmount" type="number" min="0" step="100" placeholder="Ej: 320000" required></div>
            <div class="field h6" id="frequencyWrap">
              <label class="label" for="paymentFrequency">Frecuencia de pago</label>
              <select id="paymentFrequency">
                <option value="mensual">Mensual</option>
                <option value="semanal">Semanal</option>
                <option value="diaria">Diaria</option>
              </select>
            </div>
            <div class="field h6"><label class="label" for="deposit">Depósito</label><input id="deposit" type="number" min="0" step="100" placeholder="Ej: 320000"></div>
            <div class="field h6"><label class="label" for="expenses">Expensas</label><input id="expenses" type="number" min="0" step="100" placeholder="Ej: 25000"></div>
            <div class="field h6"><label class="label" for="guarantee">Garantía</label>
              <select id="guarantee">
                <option value="">Seleccionar</option>
                <option value="propietaria">Propietaria</option>
                <option value="seguro_caucion">Seguro de caución</option>
                <option value="recibo_sueldo">Aval bancario</option>
              </select>
            </div>
          </div>
        </section>

        <!-- Acciones -->
        <section class="card section">
          <div class="btns">
            <button type="button" class="btn btn-ghost" id="draftBtn">Guardar borrador</button>
            <button type="submit" class="btn btn-primary">Publicar</button>
          </div>
          <div id="formErrors" class="errors" style="margin-top:8px"></div>
        </section>
      </div>

      <!-- RIGHT: Resumen -->
      <aside class="card sticky side">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div class="pill" id="sideOp">Operación</div>
            <div class="price" id="sidePrice">$ 0</div>
            <div class="hint" id="sideFreq">Frecuencia</div>
          </div>
          <div style="width:110px;height:82px;border-radius:16px;overflow:hidden;box-shadow:var(--ring)">
            <img id="sideImg" src="https://images.unsplash.com/photo-1493809842364-78817add7ffb?q=80&w=600&auto=format&fit=crop" alt="Preview" style="width:100%;height:100%;object-fit:cover">
          </div>
        </div>
        <div class="divider"></div>
        <div style="font-weight:800" id="sideTitle">Título de la publicación</div>
        <div class="hint" id="sideLocation">Provincia, Ciudad</div>
        <div class="chips" id="sideChips" style="margin-top:10px"></div>
      </aside>
    </form>
  </div>

  <script src="/js/create_property.js"></script>
</body>
</html>
